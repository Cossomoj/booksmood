# üéß AudioFlow - Telegram Mini App –¥–ª—è –∞—É–¥–∏–æ–∫–Ω–∏–≥

AudioFlow - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ Telegram Mini App –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∞—É–¥–∏–æ–∫–Ω–∏–≥ —Å —É–¥–æ–±–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –º–æ—â–Ω–æ–π –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å—é.

## üåê –ü—Ä–æ–¥–∞–∫—à–Ω

**ü§ñ –ë–æ—Ç**: [@booksmoodbot](https://t.me/booksmoodbot)  
**üåç URL**: https://app.booksmood.ru  
**‚öôÔ∏è –ê–¥–º–∏–Ω**: https://app.booksmood.ru/admin/login

üëâ **–ü–æ–ª–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é**: [PRODUCTION.md](PRODUCTION.md)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üöÄ **Telegram Web App** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ Telegram –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- üéµ **–ê—É–¥–∏–æ–ø–ª–µ–µ—Ä** - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- üìö **–ë–æ–ª—å—à–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø–æ–∏—Å–∫–∞
- üë§ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ—Ñ–∏–ª–∏** - –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- ‚öôÔ∏è **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### Frontend
- **HTML5/CSS3/JavaScript** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Telegram Web App SDK** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- Telegram Bot (—Ç–æ–∫–µ–Ω –∏–∑ @BotFather)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd audioflow
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/Mac)
source venv/bin/activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# Telegram Bot (–≤–∞—à —Ç–æ–∫–µ–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
BOT_TOKEN=8045700099:AAGCARHl1gc2sO5cCvoC3LlIHFC5hC04znY
TELEGRAM_BOT_USERNAME=AudioFlowBot

# Security
SECRET_KEY=audioflow-secret-key-2024-very-secure-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# Database
DATABASE_URL=sqlite:///./audioflow.db

# App Settings
DEBUG=True
CORS_ORIGINS=["https://web.telegram.org", "http://localhost:3000"]

# File Storage
UPLOAD_DIR=./app/static/uploads
MAX_FILE_SIZE=104857600

# Server
HOST=0.0.0.0
PORT=8000
```

### 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
python scripts/init_db.py
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- ‚úÖ –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ö–ª–∞—Å—Å–∏–∫–∞, –§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞, –∏ –¥—Ä.)
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å –ª–æ–≥–∏–Ω–æ–º `admin` –∏ –ø–∞—Ä–æ–ª–µ–º `admin123`

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (—Ç–æ–∫–µ–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∫–æ–¥–µ)
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/setmenubutton`
4. –£–∫–∞–∂–∏—Ç–µ URL: `https://your-domain.com` (–∏–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ `https://your-ngrok-url.com`)

## üì± –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: http://localhost:8000
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8000/docs
- **–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å**: http://localhost:8000/admin/login
- **Telegram Mini App**: –≤ –≤–∞—à–µ–º –±–æ—Ç–µ –∏–ª–∏ https://t.me/YourBotUsername

## üîê –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/admin/login
2. –í–æ–π–¥–∏—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏:
   - **–õ–æ–≥–∏–Ω**: `admin`
   - **–ü–∞—Ä–æ–ª—å**: `admin123`
3. ‚ö†Ô∏è **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!**

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

- üìä **Dashboard** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üìö **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- üè∑Ô∏è **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏
- üë• **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìÅ **–§–∞–π–ª—ã** - –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±–ª–æ–∂–µ–∫ –∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ö–Ω–∏–≥–∏"
3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ—Ä
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±–ª–æ–∂–∫—É (JPEG/PNG, –¥–æ 5MB)
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞—É–¥–∏–æ—Ñ–∞–π–ª (MP3, –¥–æ 500MB)

## üåê API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/telegram` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram Web App

### –ö–Ω–∏–≥–∏
- `GET /api/books` - —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥
- `GET /api/books/{book_id}` - –¥–µ—Ç–∞–ª–∏ –∫–Ω–∏–≥–∏
- `GET /api/books/search` - –ø–æ–∏—Å–∫ –∫–Ω–∏–≥

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `GET /api/user/library` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/user/history/{book_id}` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- `POST /api/user/favorites/{book_id}` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

### –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- `POST /api/admin/login` - –≤—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `GET /api/admin/dashboard` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `POST /api/admin/books` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
- `PUT /api/admin/books/{book_id}` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `DELETE /api/admin/books/{book_id}` - —É–¥–∞–ª–µ–Ω–∏–µ

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/docs`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
audioflow/
‚îú‚îÄ‚îÄ app/                     # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ routers/            # API —Ä–æ—É—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin/              # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ static/             # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py          # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ auth.py             # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ scripts/                # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ init_db.py         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üê≥ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t audioflow .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 audioflow
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install -e .

# –ó–∞–ø—É—Å–∫ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
uvicorn app.main:app --reload
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=app
```

### –õ–∏–Ω—Ç–∏–Ω–≥

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
flake8 app/
black app/
isort app/
```

## üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```env
DEBUG=False
SECRET_KEY=your-super-secure-secret-key-here
DATABASE_URL=sqlite:///./audioflow.db
CORS_ORIGINS=["https://web.telegram.org"]
```

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ VPS

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**:
```bash
sudo apt update
sudo apt install python3.10 python3-pip nginx
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
```bash
cd /var/www/
sudo git clone <repository-url> audioflow
cd audioflow
sudo python3 -m venv venv
sudo ./venv/bin/pip install -r requirements.txt
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd**:
```bash
sudo nano /etc/systemd/system/audioflow.service
```

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx**:
```bash
sudo nano /etc/nginx/sites-available/audioflow
```

5. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**:
```bash
sudo certbot --nginx -d your-domain.com
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Email: support@audioflow.com
- üí¨ Telegram: @AudioFlowSupport
- üêõ Issues: GitHub Issues

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork –ø—Ä–æ–µ–∫—Ç–∞
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∞—É–¥–∏–æ–∫–Ω–∏–≥** 